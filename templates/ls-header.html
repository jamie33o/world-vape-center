{% load static %}

<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <a class="navbar-brand" href="{% url 'home' %}"><img class="logo" src="{% static 'logo.png' %}" alt="logo" /><p class="d-none d-sm-inline ml-2">World Vape Center</p></a>
  <div class="d-flex ml-auto">
    <a class="text-white mt-2 position-relative d-flex d-sm-none mx-0" href="{% url 'cart-summary' %}">
      <i class="fa fa-shopping-cart h4 text-success"></i>
      <span id="cart-qty" class="badge badge-light position-absolute">
        {% with qty_amount=cart|length %}
            {% if qty_amount > 0 %}
                {{ qty_amount }}
                {% else %}
                    0
            {% endif %}
        {% endwith %}

      </span>
      <span class="ml-2">€{{ cart.get_total }}</span>
    </a>
    <span class="h4 mx-2 text-white d-flex d-sm-none">|</span>
    <p class="h5 my-auto d-inline ml-1 text-white d-sm-none">{{ user }}</p>

  </div>
  

  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item">
        <a class="nav-link" href="{% url 'home' %}">Home</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="{% url 'categories' %}">Products</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="cart.html">Contact Us</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#help">Help</a>
      </li>
      {% if user.is_authenticated %}
        <li class="nav-item d-sm-none">
          <a href="{% url 'account_change_password' %}" class="nav-link">
            Change password
          </a>      </li>
        <li class="nav-item d-sm-none">
          <a href="{% url 'account_email' %}" class="nav-link">
            Email Settings
          </a>      </li>
        <li class="nav-item d-sm-none">
          <div class="dropdown-divider"></div>
          <a href="{% url 'account_logout' %}" class="nav-link">
            Logout
          </a>           
        </li>
      {% else %}
      <li class="nav-item d-sm-none">
        <div class="dropdown-divider"></div>
        <a href="{% url 'account_login' %}" class="nav-link">
          Sign In          
        </a>
      </li>

      {% endif %}
    </ul>

      <button class="search-btn d-none d-sm-flex btn mt-2">
        <i class="fas fa-search h4"></i>
      </button>
      <span class="h2 mx-2 text-white d-none d-lg-flex">|</span>

    <div class="dropdown d-none d-sm-flex">
        {% if user.is_authenticated %}
          <a class="dropdown-toggle text-white d-flex align-items-center" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            {% if user.profile.image %}
              <img class="logo" src="{{ user.profile.image.url }}" alt="logo" />            
            {% else %}
              <i class="fa-regular fa-circle-user h3 m-0"></i>            
            {% endif %}
            <p class="h5 my-auto d-inline ml-1">{{ user }}</p>
          </a>
        {% else %}
          <a href="{% url 'account_login' %}" class="btn text-white d-flex align-items-center">
            <i class="fa-regular fa-circle-user h3 m-0"></i> 
            <p class="h5 d-inline my-auto ml-1">Sign In</p>           
          </a>
        {% endif %}
      <div class="dropdown-menu" aria-labelledby="navbarDropdown">
          <a href="{% url 'account_change_password' %}" class="dropdown-item">
            Change password
          </a>
          <a href="{% url 'account_email' %}" class="dropdown-item">
            Email Settings
          </a>
          <div class="dropdown-divider"></div>
            <a href="{% url 'account_logout' %}" class="dropdown-item">
              Logout
            </a>      
          </div>
      </div>
      <span class="h2 mx-2 text-white d-none d-sm-flex">|</span>

    <a class="text-white mt-2 position-relative d-none d-sm-flex" href="{% url 'cart-summary' %}">
      <i class="fa fa-shopping-cart h4 text-success"></i>
      <span id="cart-qty" class="badge badge-light position-absolute">
        {% with qty_amount=cart|length %}
            {% if qty_amount > 0 %}
                {{ qty_amount }}
                {% else %}
                    0
            {% endif %}
        {% endwith %}

      </span>
      <span class="ml-2">€{{ cart.get_total }}</span>
    </a>
  </div>
  <form class="form-inline my-2 my-lg-0 w-100 d-flex d-sm-none d-lg-none">
    <div class="w-100 d-flex flex-dir-row">
      <input type="text" class="w-100" placeholder="Search..." />
      <div class="input-group-append">
        <button type="button" class="btn btn-secondary btn-number">
          <i class="fa fa-search"></i>
        </button>
      </div>
    </div>
  </form>
</nav>


<form id="search-form" class="form-inline my-2 my-lg-0 w-100 position-absolute d-none">
  <div class="w-100 d-flex flex-dir-row">
    <input type="text" class="w-100" placeholder="Search..." />
    <div class="input-group-append">
      <button type="button" class="btn btn-secondary btn-number">
        <i class="fa fa-search"></i>
      </button>
    </div>
  </div>
</form>